!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(){a(this,e),this.init(),this.bindModals()}return i(e,[{key:"bindModals",value:function(){var e=this;$(document).on("click",this.settings.modalActionSelector,function(){var t=$(this),n=t.prop("tagName").toLowerCase(),a={url:"#",method:"GET",data:{}};switch(n){case"a":a.url=t.attr("href"),a.data=t.data(e.settings.dataAttribute)||{};break;case"button":case"input":}return e.modalOpen(a),!1})}},{key:"modalOpen",value:function(e){var t=this,n=$('\n<div class="modal fade AdminModal" tabindex="-1" role="dialog" data-width="100%">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <a href="#" data-dismiss="modal" aria-hidden="true" class="pull-right">\n            <i class="fa fa-times fa-2x"></i>\n        </a>\n        <a href="'+this.combineUrl(e,"tab")+'" target="_blank" class="modal-title">\n            '+e.url+'\n        </a>\n      </div>\n     \n      <iframe src="'+this.settings.adminModalPageUrl+'" frameborder="0" class="modal-body modal-frame"></iframe>\n    \n      <div class="modal-footer">\n        \n      </div>\n    </div>\n  </div>\n</div>');n.find(".modal-title").click(function(){return n.modal("hide"),!0}),n.data("adminModalsUniqueId",++this.uniqueIdCounter),n.on("shown.bs.modal",function(){var a=n.find(".modal-frame");a.ready(function(){return t.loadInFrame(a,e,n),!1})}).on("hidden.bs.modal",function(){var e=n.data("adminModalsUniqueId");localStorage.removeItem("adminModalsMessage:"+e),delete t.events[e],n.remove()}),n.modal("show")}},{key:"loadInFrame",value:function(t,n,a){t.off("ready");var i=t[0].contentWindow.document;if(n.data[this.settings.adminModalsUniqueParamKey]=this.uniqueIdPrefix+"_"+a.data("admin-modals-unique-id"),"GET"===n.method)i.location=this.combineUrl(n,"modal");else{var o=t.find(this.settings.adminModalFrameFormSelector);o.attr("action",this.combineUrl(n.url,"modal")),Object.keys(n.data).forEach(function(e){var t=n.data[e];o.append($('<input type="hidden">').attr("name",e).val(t))}),o.submit()}this.events[a.data("adminModalsUniqueId")]=function(){e.extractFormButtons(t,n,a),e.resizeModal(t,n,a)}}},{key:"combineUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal",n=e.url;return n+=n.indexOf("?")>=0?"&":"?",n+=this.settings.magicParamKey+"="+t,"GET"===e.method&&Object.keys(e.data).forEach(function(t){n+="&"+t+"="+e.data[t]}),n}},{key:"init",value:function(){var e=this,t=window.AdminModalsSettings||{},n={modalActionSelector:".admin-modal-trigger",dataAttribute:"adminModals",adminModalPageUrl:"/site/admin-modal",adminModalFrameFormSelector:".admin-modal__frame-form",magicParamKey:"__admin_modals",adminModalsUniqueParamKey:"__admin-modals__unique-id"};Object.keys(t).forEach(function(e){n[e]=t[e]}),this.settings=n,this.events={},this.uniqueIdPrefix=Math.random().toString(),this.uniqueIdCounter=0,window.addEventListener("storage",function(t){return e.receiveStorageMessage(t)})}},{key:"receiveStorageMessage",value:function(e){if(console.log("message: ",e),"loaded"===e.newValue&&0===e.key.indexOf("adminModalsMessage")){var t=e.key.match(/^adminModalsMessage:([\d.]*)_([\d]*)$/);if(null===t)return;if(t[1]!==this.uniqueIdPrefix)return;localStorage.removeItem(e.key),this.events[t[2]]()}}}],[{key:"resizeModal",value:function(e,t,n){if(t.dontResizeWindow!==!0){var a=t.maxWindowWidth||95,i=t.maxWindowHeight||80,o=$(e[0].contentWindow.document),d=(t.windowWidthLimit||Math.floor($(window).width()*a/100))-60,r=(t.windowHeightLimit||Math.floor($(window).height()*i/100))-100,s=o.width()+20,l=o.height(),u=s<d?s:d,m=l<r?l:r;n.find(".modal-dialog").css("display","table"),e.width(u),e.height(m)}}},{key:"extractFormButtons",value:function(e,t,n){var a=e[0].contentWindow,i=a.$,o=i(".form-group,.form-actions,.admin-modals__form-buttons").find("input[type=submit],button[type=submit],.btn"),d=[];o.each(function(){var e=this,t=$(this.outerHTML);t.click(function(){return $(e).click()}),d.push(t),$(this).hide()}),n.find(".modal-footer").empty().append(d)}}]),e}();window.AdminModals=new o}]);